<!--
* Vista create-tbl-menu.component.html
*
* @author  Carlos Anchundia
* @date    22-11-2024
* @name    create-tbl-menu.component.html
* @package presentation
* @subpackage tbl-menu
-->

<div class="pt-3 container-fluid">
	<form autocomplete="off" [formGroup]="formTblMenu" (ngSubmit)="saveTblMenu()">
		<div class="card card-custom">
			<div class="card-header card-header-custom">
				<h4>Formulario para el registro de menú</h4>
			</div>

			<p-card>
				<p class="m-0 mb-4">
					<small>Información general del menú. Los campos señalados con <strong>(*)</strong> son
						obligatorios.</small>
				</p>

				<p-fieldset legend="Datos Generales">
					<div class="p-fluid grid">

						<div class="col-12 md:col-6">
							<label for="estado"> Menu padre (*)</label>
							<p-select id="idMenuPadre" name="idMenuPadre" class="w-full"
								formControlName="idMenuPadre" placeholder="Seleccione" [options]="optionsMenuPadre"
								optionValue="idMenu" optionLabel="nombre"
								[ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('idMenuPadre',formTblMenu)}"
								[pTooltip]="_utilsService.getFieldErrorRequired('idMenuPadre', formTblMenu)"
								tooltipPosition="top"/>
						</div>

						<div class="col-12 md:col-6">
							<label for="nemonico"> Nemónico (*)</label>
							<input pInputText id="nemonico" name="nemonico" formControlName="nemonico"
								class="w-full text-uppercase" [showMaskTyped]="true"
								[dropSpecialCharacters]="false" [specialCharacters]="['_']"
								[shownMaskExpression]="'XXXXXX_XXXXXX_XXXXXX'" mask="SSSSSS_SSSSSS_SSSSSS"
								[validation]="true"
								[ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('nemonico',formTblMenu)}"
								[pTooltip]="_utilsService.getFieldErrorRequired('nemonico', formTblMenu)"
								tooltipPosition="top" (keypress)="this._validatorsService.validarAlfanumericos($event)"
								placeholder=""/>
						</div>

						<div class="col-12 md:col-6">
							<label for="nombre"> Nombre (*)</label>
							<input pInputText id="nombre" name="nombre" formControlName="nombre"
								class="w-full"
								[ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('nombre',formTblMenu)}"
								[pTooltip]="_utilsService.getFieldErrorRequired('nombre', formTblMenu)"
								tooltipPosition="top" (keypress)="this._validatorsService.validarAlfanumericos($event)"
								placeholder=""/>
						</div>

            <div class="col-12 md:col-6">
              <label for="estado"> Imagen (*)</label>
              <p-select id="imagen" name="imagen" class="w-full" formControlName="imagen"
                placeholder="Seleccione" [options]="optionsIcon" optionValue="value" optionLabel="name"
                [ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('imagen',formTblMenu)}"
                [pTooltip]="_utilsService.getFieldErrorRequired('imagen', formTblMenu)" tooltipPosition="top">
                <ng-template let-option #item>
                  <i class="{{ option.value }}  mr-3"></i>
                  {{ option.name }}
                </ng-template>
                <ng-template let-selectedOption #selectedItem>
                  <i class="{{ selectedOption.value }} mr-3"></i>
                  {{ selectedOption.name }}
                </ng-template>
              </p-select>
            </div>

						<div class="col-12 md:col-6">
							<label for="ruta"> Ruta (*)</label>
							<input pInputText id="ruta" name="ruta" formControlName="ruta" class="w-full"
								[ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('ruta',formTblMenu)}"
								[pTooltip]="_utilsService.getFieldErrorRequired('ruta', formTblMenu)"
								tooltipPosition="top" (keypress)="this._validatorsService.validarAlfanumericos($event)"
								placeholder=""/>
						</div>

						<div class="col-12 md:col-6">
							<label for="orden"> Orden (*)</label>
							<p-inputNumber id="orden" name="orden" formControlName="orden" size="small"
								class="w-full"
								[ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('orden',formTblMenu)}"
								[pTooltip]="_utilsService.getFieldErrorRequired('orden', formTblMenu)"
								tooltipPosition="top" (keypress)="this._validatorsService.validarSoloNumeros($event)"
								placeholder=""/>
						</div>

						<div class="col-12 md:col-6" *ngIf="formTblMenu.get('idMenu')?.value !== null">
							<label for="estado"> Estado (*)</label>
							<p-select id="estado" name="estado" class="w-full" formControlName="estado"
								placeholder="Seleccione" [options]="optionsEstado" optionValue="id" optionLabel="name"
								[ngClass]="{'ng-invalid ng-dirty': _utilsService.isFieldInvalid('estado',formTblMenu)}"
								[pTooltip]="_utilsService.getFieldErrorRequired('estado', formTblMenu)"
								tooltipPosition="top"/>
						</div>
					</div>
				</p-fieldset>
				<div class="p-fluid grid my-2 justify-content-end">
					<p-button label="Cancelar" type="button" icon="pi pi-times" class="mr-2" size="small"
						severity="danger" (click)="cancelTblMenu()"/>
					<p-button label="Guardar" type="submit" icon="pi pi-save" class="mr-2" size="small"
						severity="primary"/>
				</div>
			</p-card>
		</div>
	</form>
</div>
